(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},60:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);a(50);var r,n=a(0),c=a.n(n),s=a(21),i=a.n(s),o=a(12),u=a(22),d=(a(60),a(3)),m=(a(30),a(7)),j=a(25),l=a(28),b=a(45),O=a(18),g=a.n(O),f=a(26),h=a(27),v=a.n(h),x="https://dmitton-trivia-quiz.herokuapp.com",w="CREATE_NEW_GAME_REQUESTED",S="CREATE_NEW_GAME_SUCCEEDED",p="CREATE_NEW_GAME_FAILED",N="GET_GAME_SUCCEEDED";!function(e){e.Done="DONE",e.Unknown="UNKNOWN",e.Started="STARTED",e.Waiting="WAITING"}(r||(r={}));a(91);var D=a(1),E=function(){var e=Object(o.c)((function(e){return e.game})),t=Object(o.b)(),a=Object(n.useState)(0),c=Object(m.a)(a,2),s=c[0],i=c[1];Object(n.useEffect)((function(){var e=setInterval((function(){u()}),2e3);return i(e),function(){clearInterval(s)}}),[]);var u=function(){var a;t((a=e.gameId,function(){var e=Object(f.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_GAME_REQUESTED"}),e.prev=1,e.next=4,v.a.get("".concat(x,"/games/").concat(a));case 4:r=e.sent,t((n=r.data,{type:N,gameData:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_GAME_FAILED"});case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))},d=function(e){var t=Date.now(),a=new Date(JSON.parse(JSON.stringify(e))).valueOf();return Math.ceil(Math.max(0,a-t)/1e3)},O=function(t){var a=t.startTime,r=t.countdownTimer,c=Object(n.useState)(!1),s=Object(m.a)(c,2),i=s[0],o=s[1];Object(n.useEffect)((function(){i&&(clearInterval(r),u())}),[i]),a<=0&&!i&&o(!0);var d="seconds";return 1===a&&(d="second"),Object(D.jsx)("div",{className:"round-start mb-5",children:e.isWaitingForNextRound?"Game starting in ".concat(a," ").concat(d):""})},h=function(e){var t=e.gameStartCheckId,a=e.gameState,r=Object(n.useState)(!1),c=Object(m.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(0),u=Object(m.a)(o,2),j=u[0],l=u[1],g=Object(n.useState)(12),f=Object(m.a)(g,2),h=f[0],v=f[1];Object(n.useEffect)((function(){if(s){clearInterval(t);var e=setInterval((function(){v(d(a.timeOfNextRound))}),1e3);l(e)}return function(){clearInterval(j)}}),[s]),a.isWaitingForNextRound&&!s&&i(!0);var x=void 0!==a.requiredToStart&&void 0!==a.totalUsers?Math.min(0,a.requiredToStart-a.totalUsers):0;return Object(D.jsxs)("div",{className:"waiting-container",children:[Object(D.jsx)("div",{className:"mb-3",children:"You are Contestant #".concat(a.userId)}),Object(D.jsx)(O,{startTime:h,countdownTimer:j}),Object(D.jsxs)("div",{className:"d-flex",children:[Object(D.jsx)("div",{children:Object(D.jsx)(b.a,{animation:"border",role:"status",children:Object(D.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(D.jsx)("div",{className:"waiting-message",children:"Waiting for at least ".concat(x," more...")})]})]})},w=function(e){var t=e.startTime,a=e.countdownTimer,r=Object(n.useState)(!1),c=Object(m.a)(r,2),s=c[0],i=c[1];Object(n.useEffect)((function(){s&&(clearInterval(a),u())}),[s]),t<=0&&!s&&i(!0);var o="seconds";return 1===t&&(o="second"),Object(D.jsx)("div",{className:"round-start mb-5",children:"".concat(t," ").concat(o," left to answer!")})},S=function(e){var t=e.gameState,a=[];return t.allCurrentAnswersShuffled.forEach((function(e,t){a.push(Object(D.jsx)(l.a.Check,{type:"radio",id:"answer-".concat(t),label:"".concat(Object(j.a)(e)),className:"mb-3"}))})),Object(D.jsx)(l.a,{children:Object(D.jsx)("div",{className:"mb-3",children:a},"answer-form")})},p=function(e){var t=e.gameState,a=Object(n.useState)(0),r=Object(m.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(10),o=Object(m.a)(i,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){var e=setInterval((function(){l(d(t.timeOfNextRound))}),1e3);return s(e),function(){clearInterval(e)}}),[]),Object(D.jsxs)("div",{className:"waiting-container",children:[Object(D.jsx)("div",{children:"Round ".concat(t.currentRound)}),Object(D.jsx)("div",{className:"mb-3",children:"".concat(Object(j.a)(t.currentQuestion))}),Object(D.jsx)(w,{startTime:u,countdownTimer:c}),Object(D.jsx)(S,{gameState:t})]})};return e.status===r.Waiting?Object(D.jsx)(h,{gameStartCheckId:s,gameState:e}):e.status===r.Started?Object(D.jsx)(p,{gameState:e}):null},I=a(49),A=a(95),R=(a(93),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.game.isSearchingForGame})),a=Object(o.c)((function(e){return e.game.gameId}));if(a!==A.a)return Object(D.jsx)(d.a,{to:"/games/".concat(a)});var r=function(){var a=Object(n.useState)(!1),r=Object(m.a)(a,2),c=r[0],s=r[1],i=Object(n.useCallback)((function(){s(!0)}),[c]);return Object(n.useEffect)((function(){c&&e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:w}),e.prev=1,a={},e.next=5,v.a.post("".concat(x,"/games"),a);case 5:r=e.sent,t((n=r.data,{type:S,gameData:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:p});case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[c]),Object(D.jsx)(I.a,{className:"mt-5",variant:"primary",size:"lg",onClick:t?void 0:function(){i()},disabled:t,children:t?"Searching...":"Find a Game"})};return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"title mt-5",children:"Welcome to the Trivia Quiz!"}),Object(D.jsx)("div",{className:"description mt-3",children:"Compete with other players to see who can correctly answer the most questions."}),Object(D.jsx)("div",{className:"description mt-3",children:"Find a game below!"}),Object(D.jsx)(r,{})]})}),T=function(){return Object(D.jsx)("div",{className:"dark-mode-background",children:Object(D.jsx)("h1",{children:"Sorry, page not found"})})},C=function(){return Object(D.jsxs)(d.d,{children:[Object(D.jsx)(d.b,{path:"/",element:Object(D.jsx)(R,{})}),Object(D.jsx)(d.b,{path:"/games/:id",element:Object(D.jsx)(E,{})}),Object(D.jsx)(d.b,{path:"*",element:Object(D.jsx)(T,{})})]})},U=function(){return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)("main",{children:Object(D.jsx)(u.a,{children:Object(D.jsx)(C,{})})})})},k=a(14),F=a(46),G=a(47),W=a(48),y=a(2),_=function(e){for(var t,a=e.length;0!=a;){t=Math.floor(Math.random()*a),a--;var r=[e[t],e[a]];e[a]=r[0],e[t]=r[1]}return e},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSearchingForGame:!1,gameId:A.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2},t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case w:a=Object(y.a)(Object(y.a)({},a),{},{isSearchingForGame:!0});break;case S:a=Object(y.a)(Object(y.a)({},a),{},{isSearchingForGame:!1,gameId:t.gameData.gameId,userId:t.gameData.userId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart});break;case N:a=Object(y.a)(Object(y.a)({},a),{},{isSearchingForGame:!1,gameId:t.gameData.gameId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,allCurrentAnswersShuffled:_([].concat(Object(W.a)(t.gameData.currentIncorrectAnswers),[t.gameData.currentCorrectAnswer])),status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart});break;case p:a=Object(y.a)(Object(y.a)({},a),{},{isSearchingForGame:!1,gameId:A.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],allCurrentAnswersShuffled:[],currentCorrectAnswer:"",status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2})}return a},q=Object(k.combineReducers)({game:M});var Q,J={game:{isSearchingForGame:!1,gameId:A.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2}},z=(Q=J,Object(k.createStore)(q,Q,Object(F.composeWithDevTools)(Object(k.applyMiddleware)(G.a))));i.a.render(Object(D.jsx)(o.a,{store:z,children:Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(U,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.ede52c88.chunk.js.map