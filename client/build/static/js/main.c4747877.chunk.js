(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){},40:function(e,t,a){},61:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);a(51);var n,r=a(0),c=a.n(r),s=a(23),i=a.n(s),o=a(11),u=a(19),d=(a(61),a(3)),l=(a(31),a(7)),m=a(13),j=a(95),b=a(14),g=a.n(b),O=a(24),h=a(25),f=a.n(h),v="https://dmitton-trivia-quiz.herokuapp.com",x="CREATE_NEW_GAME_REQUESTED",w="CREATE_NEW_GAME_SUCCEEDED",S="CREATE_NEW_GAME_FAILED",p="GET_GAME_SUCCEEDED",A="UPDATE_REMAINING_PLAYERS_REQUESTED",E="UPDATE_REMAINING_PLAYERS_SUCCEEDED",N="UPDATE_REMAINING_PLAYERS_FAILED",D="SELECTED_ANSWER_SET";!function(e){e.Done="DONE",e.Unknown="UNKNOWN",e.Started="STARTED",e.Waiting="WAITING"}(n||(n={}));var I=function(){return function(){var e=Object(O.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x}),e.prev=1,a={},e.next=5,f.a.post("".concat(v,"/games"),a);case 5:n=e.sent,t((r=n.data,{type:w,gameData:r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:S});case 12:case"end":return e.stop()}var r}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e,t,a){return function(){var n=Object(O.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:A}),n.prev=1,!a){n.next=5;break}return n.next=5,f.a.post("".concat(v,"/games/").concat(e,"/remainingPlayers/").concat(t),{});case 5:r({type:E}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r({type:N});case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},R=(a(40),a(1)),C=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.game.isSearchingForGame})),a=Object(o.c)((function(e){return e.game.gameId}));if(a!==j.a)return Object(R.jsx)(d.a,{to:"/games/".concat(a)});var n=function(){var a=Object(r.useState)(!1),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useCallback)((function(){s(!0)}),[c]);return Object(r.useEffect)((function(){c&&e(I())}),[c]),Object(R.jsx)(m.a,{className:"mt-5",variant:"success",size:"lg",onClick:t?void 0:function(){i()},disabled:t,children:t?"Searching...":"Find a Game"})};return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"mt-5 alerting",children:"Oh no, you lost!"}),Object(R.jsx)("div",{className:"description mt-3",children:"Compete with other players to see who can correctly answer the most questions."}),Object(R.jsx)("div",{className:"description mt-3",children:"Play again?"}),Object(R.jsx)(n,{})]})},U=a(29),T=a(30),k=a(47),P=(a(93),function(){var e=Object(o.c)((function(e){return e.game})),t=Object(o.b)(),a=Object(r.useState)(0),c=Object(l.a)(a,2),s=c[0],i=c[1];Object(r.useEffect)((function(){var e=setInterval((function(){u()}),2e3);return i(e),function(){clearInterval(s)}}),[]);var u=function(){var a;t((a=e.gameId,function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_GAME_REQUESTED"}),e.prev=1,e.next=4,f.a.get("".concat(v,"/games/").concat(a));case 4:n=e.sent,t((r=n.data,{type:p,gameData:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_GAME_FAILED"});case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))},d=function(e){var t=Date.now(),a=new Date(JSON.parse(JSON.stringify(e))).valueOf();return Math.ceil(Math.max(0,a-t)/1e3)},j=function(t){var a=t.startTime,n=t.countdownTimer,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1];Object(r.useEffect)((function(){i&&(clearInterval(n),u())}),[i]),a<=0&&!i&&o(!0);var d="seconds";return 1===a&&(d="second"),Object(R.jsx)("div",{className:"alerting mb-5",children:e.isWaitingForNextRound?"Game starting in ".concat(a," ").concat(d):""})},b=function(e){var t=e.gameStartCheckId,a=e.gameState,n=Object(r.useState)(!1),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(0),u=Object(l.a)(o,2),m=u[0],b=u[1],g=Object(r.useState)(12),O=Object(l.a)(g,2),h=O[0],f=O[1];Object(r.useEffect)((function(){if(s){clearInterval(t);var e=setInterval((function(){f(d(a.timeOfNextRound))}),1e3);b(e)}return function(){clearInterval(m)}}),[s]),a.isWaitingForNextRound&&!s&&i(!0);var v=void 0!==a.requiredToStart&&void 0!==a.totalUsers?Math.min(0,a.requiredToStart-a.totalUsers):0;return Object(R.jsxs)("div",{className:"waiting-container",children:[Object(R.jsx)("div",{className:"mb-3",children:"You are Player #".concat(a.userId)}),Object(R.jsx)(j,{startTime:h,countdownTimer:m}),Object(R.jsxs)("div",{className:"d-flex",children:[Object(R.jsx)("div",{children:Object(R.jsx)(k.a,{animation:"border",role:"status",children:Object(R.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(R.jsx)("div",{className:"waiting-message",children:0===v?"Waiting for any stragglers...":"Waiting for at least ".concat(v," more...")})]})]})},h=function(a){var n=a.startTime,c=a.countdownTimer,s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1];Object(r.useEffect)((function(){o&&(clearInterval(c),u(),e.hasSubmittedAnswer||t(y(e.gameId,e.userId,!0)))}),[o]),n<=0&&!o&&d(!0);var m="seconds";return 1===n&&(m="second"),Object(R.jsx)("div",{className:"alerting mb-5",children:"".concat(n," ").concat(m," left to answer!")})},x=function(e){var t=e.gameState,a=Object(r.useState)(""),n=Object(l.a)(a,2),c=n[0],s=n[1],i=function(e){s(e.target.id.substr(7))},o=[];return t.allCurrentAnswersShuffled.forEach((function(e,a){var n="";t.hasSubmittedAnswer&&(n="answer-border-wrong",e===t.currentCorrectAnswer&&(n="answer-border-correct")),o.push(Object(R.jsx)("div",{className:"".concat(n," mb-3 px-3"),children:Object(R.jsx)(T.a.Check,{type:"radio",id:"answer-".concat(a),label:"".concat(Object(U.a)(e)),className:"answer",disabled:t.hasSubmittedAnswer,onChange:i,checked:c==="".concat(a)})},"answer-".concat(a)))})),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(T.a,{children:Object(R.jsx)("div",{children:o},"answer-form")}),Object(R.jsx)(w,{gameState:t,selectedAnswer:c})]})},w=function(e){var a=e.gameState,n=e.selectedAnswer,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=a.allCurrentAnswersShuffled[n]!==a.currentCorrectAnswer;i&&t(y(a.gameId,a.userId,e))}),[i]),Object(R.jsx)(m.a,{className:"mt-5",variant:"success",size:"lg",onClick:a.hasSubmittedAnswer?void 0:function(){o(!0)},disabled:a.hasSubmittedAnswer,children:a.isUpdatingRemainingPlayers?"Submitting...":"Submit Answer"})},S=function(e){var t=e.gameState,a=Object(r.useState)(0),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(12),o=Object(l.a)(i,2),u=o[0],m=o[1];return Object(r.useEffect)((function(){var e=setInterval((function(){m(d(t.timeOfNextRound))}),1e3);return s(e),function(){clearInterval(e)}}),[]),Object(R.jsxs)("div",{className:"waiting-container",children:[Object(R.jsx)("div",{children:"Round ".concat(t.currentRound)}),Object(R.jsx)("div",{className:"mb-3",children:"".concat(Object(U.a)(t.currentQuestion))}),Object(R.jsx)(h,{startTime:u,countdownTimer:c}),Object(R.jsx)(x,{gameState:t})]})},A=function(e){var t=e.gameState,a=function(){return Object(R.jsx)(m.a,{className:"mt-5",variant:"success",size:"lg",href:v,children:"Home"})};return Object(R.jsxs)("div",{children:[t.hasPlayerWon?Object(R.jsx)("div",{className:"mt-5 win",children:"Congratulations, you won!"}):Object(R.jsx)("div",{className:"mt-5 alerting",children:"Oh no, you lost!"}),Object(R.jsx)("div",{className:"description mt-3",children:"Compete with other players to see who can correctly answer the most questions."}),Object(R.jsx)("div",{className:"description mt-3",children:"Play again?"}),Object(R.jsx)(a,{})]})};return e.status===n.Waiting?Object(R.jsx)(b,{gameStartCheckId:s,gameState:e}):e.status===n.Started?Object(R.jsx)(S,{gameState:e}):e.status===n.Done||e.hasPlayerLost?Object(R.jsx)(A,{gameState:e}):null}),W=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.game.isSearchingForGame})),a=Object(o.c)((function(e){return e.game.gameId}));if(a!==j.a)return Object(R.jsx)(d.a,{to:"/games/".concat(a)});var n=function(){var a=Object(r.useState)(!1),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(r.useCallback)((function(){s(!0)}),[c]);return Object(r.useEffect)((function(){c&&e(I())}),[c]),Object(R.jsx)(m.a,{className:"mt-5",variant:"success",size:"lg",onClick:t?void 0:function(){i()},disabled:t,children:t?"Searching...":"Find a Game"})};return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"title mt-5",children:"Welcome to the Trivia Quiz!"}),Object(R.jsx)("div",{className:"description mt-3",children:"Compete with other players to see who can correctly answer the most questions."}),Object(R.jsx)("div",{className:"description mt-3",children:"Find a game below!"}),Object(R.jsx)(n,{})]})},_=function(){return Object(R.jsx)("div",{className:"mt-5 dark-mode-background",children:Object(R.jsx)("h1",{children:"Sorry, page not found"})})},F=function(){return Object(R.jsxs)(d.d,{children:[Object(R.jsx)(d.b,{path:"/",element:Object(R.jsx)(W,{})}),Object(R.jsx)(d.b,{path:"/games/:id",element:Object(R.jsx)(P,{})}),Object(R.jsx)(d.b,{path:"/end",element:Object(R.jsx)(C,{})}),Object(R.jsx)(d.b,{path:"*",element:Object(R.jsx)(_,{})})]})},G=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)("main",{children:Object(R.jsx)(u.a,{children:Object(R.jsx)(F,{})})})})},M=a(16),L=a(48),q=a(49),Q=a(50),z=a(2),J=function(e){for(var t,a=e.length;0!=a;){t=Math.floor(Math.random()*a),a--;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e},Y=function(e,t){return-1===e.findIndex((function(e){return e===t}))},B=function(e,t){return 1===e.length&&e[0]===t},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSearchingForGame:!1,gameId:j.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:n.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1},t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case x:a=Object(z.a)(Object(z.a)({},a),{},{isSearchingForGame:!0});break;case w:a=Object(z.a)(Object(z.a)({},a),{},{isSearchingForGame:!1,gameId:t.gameData.gameId,userId:t.gameData.userId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1});break;case p:a=Object(z.a)(Object(z.a)({},a),{},{isSearchingForGame:!1,gameId:t.gameData.gameId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,allCurrentAnswersShuffled:J([].concat(Object(Q.a)(t.gameData.currentIncorrectAnswers),[t.gameData.currentCorrectAnswer])),status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart,hasPlayerLost:Y(t.gameData.remainingUsers,e.userId),hasPlayerWon:B(t.gameData.remainingUsers,e.userId),hasSubmittedAnswer:!1,selectedAnswer:""});break;case S:a=Object(z.a)(Object(z.a)({},a),{},{isSearchingForGame:!1,gameId:j.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],allCurrentAnswersShuffled:[],currentCorrectAnswer:"",status:n.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,hasPlayerLost:!1,hasPlayerWon:!1});break;case A:a=Object(z.a)(Object(z.a)({},a),{},{isUpdatingRemainingPlayers:!0,hasSubmittedAnswer:!0});break;case E:case N:a=Object(z.a)(Object(z.a)({},a),{},{isUpdatingRemainingPlayers:!1});break;case D:a=Object(z.a)(Object(z.a)({},a),{},{selectedAnswer:t.answer})}return a},K=Object(M.combineReducers)({game:H});var V,X={game:{isSearchingForGame:!1,gameId:j.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:n.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1}},Z=(V=X,Object(M.createStore)(K,V,Object(L.composeWithDevTools)(Object(M.applyMiddleware)(q.a))));i.a.render(Object(R.jsx)(o.a,{store:Z,children:Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(G,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.c4747877.chunk.js.map