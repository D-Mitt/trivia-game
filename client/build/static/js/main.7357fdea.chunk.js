(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){},60:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);a(50);var r,n=a(0),s=a.n(n),c=a(24),i=a.n(c),o=a(11),u=a(25),l=(a(60),a(3)),d=(a(31),a(7)),m=a(28),j=a(17),b=a(29),g=a(46),O="https://dmitton-trivia-quiz.herokuapp.com",h=a(13),f=a.n(h),x=a(20),v=a(21),w=a.n(v),S="CREATE_NEW_SOLO_GAME_REQUESTED",A="CREATE_NEW_SOLO_GAME_SUCCEEDED",p="CREATE_NEW_SOLO_GAME_FAILED",E="JOIN_MULTIPLAYER_GAME_REQUESTED",D="JOIN_MULTIPLAYER_GAME_SUCCEEDED",N="JOIN_MULTIPLAYER_GAME_FAILED",I="GET_GAME_SUCCEEDED",R="UPDATE_REMAINING_PLAYERS_REQUESTED",y="UPDATE_REMAINING_PLAYERS_SUCCEEDED",U="UPDATE_REMAINING_PLAYERS_FAILED",C="SELECTED_ANSWER_SET";!function(e){e.Done="DONE",e.Unknown="UNKNOWN",e.Started="STARTED",e.Waiting="WAITING"}(r||(r={}));a(91);var T=a(1),P=function(){var e=Object(o.c)((function(e){return e.game})),t=Object(o.b)(),a=Object(n.useState)(0),s=Object(d.a)(a,2),c=s[0],i=s[1];Object(n.useEffect)((function(){var e=setInterval((function(){u()}),2e3);return i(e),function(){clearInterval(c)}}),[]);var u=function(){var a;t((a=e.gameId,function(){var e=Object(x.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_GAME_REQUESTED"}),e.prev=1,e.next=4,w.a.get("".concat(O,"/games/").concat(a));case 4:r=e.sent,t((n=r.data,{type:I,gameData:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_GAME_FAILED"});case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))},l=function(e){var t=Date.now(),a=new Date(JSON.parse(JSON.stringify(e))).valueOf();return Math.ceil(Math.max(0,a-t)/1e3)},h=function(t){var a=t.startTime,r=t.countdownTimer,s=Object(n.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];Object(n.useEffect)((function(){i&&(clearInterval(r),u())}),[i]),a<=0&&!i&&o(!0);var l="seconds";return 1===a&&(l="second"),Object(T.jsx)("div",{className:"alerting mb-5",children:e.isWaitingForNextRound?"Game starting in ".concat(a," ").concat(l):""})},v=function(t){var a=t.gameStartCheckId,r=Object(n.useState)(!1),s=Object(d.a)(r,2),c=s[0],i=s[1],o=Object(n.useState)(0),u=Object(d.a)(o,2),m=u[0],j=u[1],b=Object(n.useState)(e.isSolo?5:12),O=Object(d.a)(b,2),f=O[0],x=O[1];Object(n.useEffect)((function(){if(c){clearInterval(a);var t=setInterval((function(){x(l(e.timeOfNextRound))}),1e3);j(t)}return function(){clearInterval(m)}}),[c]);var v=void 0!==e.requiredToStart&&void 0!==e.totalUsers?Math.max(0,e.requiredToStart-e.totalUsers):0;return e.isWaitingForNextRound&&0===v&&!c&&i(!0),Object(T.jsxs)("div",{className:"waiting-container",children:[Object(T.jsx)("div",{className:"mb-3",children:"You are Player #".concat(e.userId)}),Object(T.jsx)(h,{startTime:f,countdownTimer:m}),e.isSolo?Object(T.jsx)("div",{className:"waiting-message",children:"Enjoy your solo game!"}):Object(T.jsxs)("div",{className:"d-flex",children:[Object(T.jsx)("div",{children:Object(T.jsx)(g.a,{animation:"border",role:"status",children:Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(T.jsx)("div",{className:"waiting-message",children:0===v?"Waiting for any stragglers...":"Waiting for at least ".concat(v," more...")})]})]})},S=function(t){var a=t.startTime,r=t.countdownTimer,s=Object(n.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];Object(n.useEffect)((function(){i&&(clearInterval(r),u())}),[i]),a<=0&&!i&&o(!0);var l="seconds";return 1===a&&(l="second"),e.hasSubmittedAnswer?Object(T.jsx)("div",{className:"alerting mb-5",children:"".concat(a," ").concat(l," until the round is over!")}):Object(T.jsx)("div",{className:"alerting mb-5",children:"".concat(a," ").concat(l," left to answer!")})},A=function(){var t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],s=a[1],c=function(e){s(e.target.id.substr(7))},i=[];return e.allCurrentAnswersShuffled.forEach((function(t,a){var n="";e.hasSubmittedAnswer&&(n="answer-border-wrong",t===e.currentCorrectAnswer&&(n="answer-border-correct")),i.push(Object(T.jsx)("div",{className:"".concat(n," mb-3 px-3"),children:Object(T.jsx)(b.a.Check,{type:"radio",id:"answer-".concat(a),label:"".concat(Object(m.a)(t)),className:"answer",disabled:e.hasSubmittedAnswer,onChange:c,checked:r==="".concat(a)})},"answer-".concat(a)))})),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:i},"answer-form")}),Object(T.jsx)(p,{selectedAnswer:r})]})},p=function(a){var r=a.selectedAnswer,s=Object(n.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){var a=e.allCurrentAnswersShuffled[r]===e.currentCorrectAnswer;i&&t(function(e,t,a){return function(){var r=Object(x.a)(f.a.mark((function r(n){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n({type:R}),r.prev=1,!a){r.next=5;break}return r.next=5,w.a.post("".concat(O,"/games/").concat(e,"/remainingPlayers/").concat(t),{});case 5:n({type:y}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n({type:U});case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}(e.gameId,e.userId,a))}),[i]),Object(T.jsx)(j.a,{className:"mt-5",variant:"success",size:"lg",onClick:e.hasSubmittedAnswer?void 0:function(){o(!0)},disabled:e.hasSubmittedAnswer,children:e.isUpdatingRemainingPlayers?"Submitting...":"Submit Answer"})},E=function(){var t=Object(n.useState)(0),a=Object(d.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(12),i=Object(d.a)(c,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){var t=setInterval((function(){u(l(e.timeOfNextRound))}),1e3);return s(t),function(){clearInterval(t)}}),[]),Object(T.jsxs)("div",{className:"waiting-container",children:[Object(T.jsx)("div",{children:"Round ".concat(e.currentRound)}),Object(T.jsx)("div",{className:"mb-3",children:"".concat(Object(m.a)(e.currentQuestion))}),Object(T.jsx)(S,{startTime:o,countdownTimer:r}),Object(T.jsx)(A,{})]})},D=function(){var t=function(){return Object(T.jsx)(j.a,{className:"mt-5",variant:"success",size:"lg",href:O,children:"Home"})};return Object(T.jsxs)("div",{children:[e.hasPlayerWon?Object(T.jsx)("div",{className:"mt-5 win",children:"Congratulations, you won!"}):Object(T.jsx)("div",{className:"mt-5 alerting",children:"Oh no, you lost!"}),Object(T.jsx)("div",{className:"description mt-3",children:"Play again?"}),Object(T.jsx)(t,{})]})};return e.status===r.Waiting?Object(T.jsx)(v,{gameStartCheckId:c}):e.status===r.Started&&(!e.hasPlayerLost||e.currentRound<=1)?Object(T.jsx)(E,{}):e.status===r.Done||e.hasPlayerLost?Object(T.jsx)(D,{}):null},_=a(95),k=(a(93),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.game.isSearchingForGame})),a=Object(o.c)((function(e){return e.game.isCreatingSoloGame})),r=Object(o.c)((function(e){return e.game.gameId}));if(r!==_.a)return Object(T.jsx)(l.a,{to:"/games/".concat(r)});var s=function(r){var s=r.classes,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],l=Object(n.useCallback)((function(){u(!0)}),[o]);return Object(n.useEffect)((function(){o&&e(function(){var e=Object(x.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:E}),e.prev=1,a={},e.next=5,w.a.post("".concat(O,"/games"),a);case 5:r=e.sent,t((n=r.data,{type:D,gameData:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:N});case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(T.jsx)(j.a,{className:"".concat(s," mt-5"),variant:"success",size:"lg",onClick:t?void 0:function(){l()},disabled:t||a,children:t?"Searching...":"Find a Game"})},c=function(r){var s=r.classes,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],l=Object(n.useCallback)((function(){u(!0)}),[o]);return Object(n.useEffect)((function(){o&&e(function(){var e=Object(x.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:S}),e.prev=1,a={},e.next=5,w.a.post("".concat(O,"/soloGames"),a);case 5:r=e.sent,t((n=r.data,{type:A,gameData:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:p});case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(T.jsx)(j.a,{className:"".concat(s," mt-5"),variant:"success",size:"lg",onClick:a?void 0:function(){l()},disabled:t||a,children:a?"Creating...":"Solo Game"})};return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"title mt-5",children:"Welcome to the Trivia Quiz!"}),Object(T.jsx)("div",{className:"description mt-3",children:"Compete with other players to see who can correctly answer the most questions."}),Object(T.jsx)("div",{className:"description mt-3",children:"Find a game below!"}),Object(T.jsxs)("div",{children:[Object(T.jsx)(s,{classes:"first-button"}),Object(T.jsx)(c,{classes:""})]}),Object(T.jsxs)("ul",{className:"rules mt-5 mx-3 d-flex",children:[Object(T.jsx)("li",{children:"When the game begins, you will have 12 seconds to answer a multiple choice question."}),Object(T.jsxs)("li",{children:["After submitting your answer the correct answer will be displayed in ",Object(T.jsx)("span",{className:"green",children:"green"}),"."]})]})]})}),G=function(){return Object(T.jsx)("div",{className:"mt-5 dark-mode-background",children:Object(T.jsx)("h1",{children:"Sorry, page not found"})})},W=function(){return Object(T.jsxs)(l.d,{children:[Object(T.jsx)(l.b,{path:"/",element:Object(T.jsx)(k,{})}),Object(T.jsx)(l.b,{path:"/games/:id",element:Object(T.jsx)(P,{})}),Object(T.jsx)(l.b,{path:"*",element:Object(T.jsx)(G,{})})]})},L=function(){return Object(T.jsx)("div",{className:"App",children:Object(T.jsx)("main",{children:Object(T.jsx)(u.a,{children:Object(T.jsx)(W,{})})})})},F=a(15),M=a(47),Q=a(48),q=a(49),J=a(2),Y=function(e){for(var t,a=e.length;0!=a;){t=Math.floor(Math.random()*a),a--;var r=[e[t],e[a]];e[a]=r[0],e[t]=r[1]}return e},z=function(e,t){return-1===e.findIndex((function(e){return e===t}))},B=function(e,t){return 1===e.length&&e[0]===t},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSearchingForGame:!1,isCreatingSoloGame:!1,gameId:_.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1,isSolo:!0},t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case S:a=Object(J.a)(Object(J.a)({},a),{},{isCreatingSoloGame:!0});break;case A:a=Object(J.a)(Object(J.a)({},a),{},{isCreatingSoloGame:!1,gameId:t.gameData.gameId,userId:t.gameData.userId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1,isSolo:t.gameData.isSolo});break;case p:a=Object(J.a)(Object(J.a)({},a),{},{isCreatingSoloGame:!1,gameId:_.a,userId:0,isWaitingForNextRound:!1,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],allCurrentAnswersShuffled:[],currentCorrectAnswer:"",status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,hasPlayerLost:!1,hasPlayerWon:!1,isSolo:!1});break;case E:a=Object(J.a)(Object(J.a)({},a),{},{isSearchingForGame:!0});break;case D:a=Object(J.a)(Object(J.a)({},a),{},{isSearchingForGame:!1,gameId:t.gameData.gameId,userId:t.gameData.userId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1,isSolo:t.gameData.isSolo});break;case N:a=Object(J.a)(Object(J.a)({},a),{},{isSearchingForGame:!1,gameId:_.a,userId:0,isWaitingForNextRound:!1,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],allCurrentAnswersShuffled:[],currentCorrectAnswer:"",status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,hasPlayerLost:!1,hasPlayerWon:!1,isSolo:!1});break;case I:a=Object(J.a)(Object(J.a)({},a),{},{isCreatingSoloGame:!1,gameId:t.gameData.gameId,isWaitingForNextRound:t.gameData.isWaitingForNextRound,timeOfNextRound:t.gameData.timeOfNextRound,currentRound:t.gameData.currentRound,currentQuestion:t.gameData.currentQuestion,currentIncorrectAnswers:t.gameData.currentIncorrectAnswers,currentCorrectAnswer:t.gameData.currentCorrectAnswer,allCurrentAnswersShuffled:Y([].concat(Object(q.a)(t.gameData.currentIncorrectAnswers),[t.gameData.currentCorrectAnswer])),status:t.gameData.status,totalUsers:t.gameData.totalUsers,remainingUsers:t.gameData.remainingUsers,requiredToStart:t.gameData.requiredToStart,hasPlayerLost:z(t.gameData.remainingUsers,e.userId),hasPlayerWon:B(t.gameData.remainingUsers,e.userId),hasSubmittedAnswer:!1,selectedAnswer:""});break;case R:a=Object(J.a)(Object(J.a)({},a),{},{isUpdatingRemainingPlayers:!0,hasSubmittedAnswer:!0});break;case y:case U:a=Object(J.a)(Object(J.a)({},a),{},{isUpdatingRemainingPlayers:!1});break;case C:a=Object(J.a)(Object(J.a)({},a),{},{selectedAnswer:t.answer})}return a},K=Object(F.combineReducers)({game:H});var V,X={game:{isSearchingForGame:!1,isCreatingSoloGame:!1,gameId:_.a,userId:0,isWaitingForNextRound:!1,timeOfNextRound:new Date,currentRound:0,currentQuestion:"",currentIncorrectAnswers:[],currentCorrectAnswer:"",allCurrentAnswersShuffled:[],status:r.Unknown,totalUsers:0,remainingUsers:[0],requiredToStart:2,isUpdatingRemainingPlayers:!1,hasSubmittedAnswer:!1,selectedAnswer:"",hasPlayerLost:!1,hasPlayerWon:!1,isSolo:!1}},Z=(V=X,Object(F.createStore)(K,V,Object(M.composeWithDevTools)(Object(F.applyMiddleware)(Q.a))));i.a.render(Object(T.jsx)(o.a,{store:Z,children:Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(L,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.7357fdea.chunk.js.map